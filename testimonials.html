<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BABA DEEP SINGH - Testimonials</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --green:#1f7a4f;
  --green-light:#e9f7f0;
  --green-dark:#134e36;
}
*{box-sizing:border-box;font-family:"Segoe UI",sans-serif;}
body{margin:0;background:linear-gradient(135deg,#ecfff6,#ffffff);color:#333;}
header{background:linear-gradient(135deg,var(--green),#2fb17c);color:white;padding:35px 20px;text-align:center;}
header h1{margin:0;font-size:38px;}
nav{display:flex;justify-content:center;flex-wrap:wrap;gap:15px;background:white;padding:18px;box-shadow:0 6px 18px rgba(0,0,0,0.08);}
nav button{border:none;background:var(--green-light);color:var(--green-dark);padding:12px 26px;border-radius:30px;cursor:pointer;font-size:16px;}
nav button:hover{background:var(--green);color:white;}
.container{max-width:1100px;margin:45px auto;padding:0 20px;}
.section{background:white;padding:35px;border-radius:25px;box-shadow:0 18px 40px rgba(0,0,0,0.08);margin-bottom:30px;}
.section h2{color:var(--green);font-size:32px;margin-top:0;text-align:center;}
.video-grid{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;}
.review-card{background:#f3fff7;padding:20px;border-radius:15px;margin-bottom:15px;}
.review-card .stars{color:#f5b50a;margin-bottom:5px;}
form input, form textarea{width:100%;padding:10px;margin-bottom:10px;}
form button{background:var(--green);color:white;border:none;padding:10px 20px;border-radius:20px;cursor:pointer;}
.star-rating{display:flex;gap:5px;cursor:pointer;margin-bottom:10px;}
.star-rating span{font-size:24px;color:lightgray;}
.star-rating span.selected{color:#f5b50a;}
footer{margin-top:50px;background:var(--green-dark);color:white;text-align:center;padding:20px;}
@media(max-width:768px){.video-grid iframe{width:100%;height:300px;}}
</style>
</head>
<body>

<header>
  <h1>BABA DEEP SINGH</h1>
  <p>Video Testimonials & Patient Reviews</p>
</header>

<nav>
  <button onclick="location.href='index.html'">Home</button>
  <button onclick="location.href='about-doctor.html'">About Doctor</button>
  <button onclick="location.href='gallery.html'">Gallery</button>
  <button onclick="location.href='contact.html'">Contact</button>
</nav>

<div class="container">

<!-- VIDEO TESTIMONIALS -->
<div class="section">
<h2>Patient Video Testimonials</h2>
<div class="video-grid">
<iframe width="300" height="500" src="https://www.youtube.com/embed/d1HVovve27g?start=78" frameborder="0" allowfullscreen></iframe>
<iframe width="300" height="500" src="https://www.youtube.com/embed/UC_vi0gLeiA?start=89&end=135" frameborder="0" allowfullscreen></iframe>
<iframe width="300" height="500" src="https://www.youtube.com/embed/dM7MDBiO2Bo?start=49&end=72" frameborder="0" allowfullscreen></iframe>
</div>
</div>

<!-- ADD REVIEW FORM -->
<div class="section">
<h2>Add Your Review</h2>
<form id="reviewForm">
<input type="text" id="name" placeholder="Your Name" required>
<textarea id="review" placeholder="Write your review..." required></textarea>
<div class="star-rating" id="starRating">
  <span data-value="1">&#9733;</span>
  <span data-value="2">&#9733;</span>
  <span data-value="3">&#9733;</span>
  <span data-value="4">&#9733;</span>
  <span data-value="5">&#9733;</span>
</div>
<input type="hidden" id="rating" value="0">
<button type="submit">Submit Review</button>
</form>
<p id="msg"></p>
</div>

<!-- DISPLAY REVIEWS -->
<div class="section">
<h2>Patient Reviews</h2>
<div id="reviewsContainer"></div>
</div>

</div>

<footer>
© 2026 BDS Physiotherapy, Yoga & Ayurvedic Center
</footer>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyDwVp7Pn3WWezbBnWC0Ps7P3OppYrWQ5Jo",
  authDomain: "bdss-671d8.firebaseapp.com",
  projectId: "bdss-671d8"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// STAR RATING LOGIC
const stars = document.querySelectorAll("#starRating span");
stars.forEach(star=>{
  star.addEventListener("click", ()=>{
    const value = star.dataset.value;
    document.getElementById("rating").value = value;
    stars.forEach(s=>s.classList.remove("selected"));
    for(let i=0;i<value;i++) stars[i].classList.add("selected");
  });
});

// SUBMIT REVIEW
document.getElementById("reviewForm").addEventListener("submit", async function(e){
  e.preventDefault();
  const name = document.getElementById("name").value.trim();
  const review = document.getElementById("review").value.trim();
  const rating = parseInt(document.getElementById("rating").value);
  const msg = document.getElementById("msg");

  if(!name || !review || rating===0){ 
    msg.textContent="❌ Please fill all fields and select star rating"; 
    return; 
  }

  try{
    await db.collection("reviews").add({name, review, rating, time:new Date()});
    msg.textContent="✅ Review Submitted!";
    document.getElementById("reviewForm").reset();
    stars.forEach(s=>s.classList.remove("selected"));
  }catch(err){
    console.error(err);
    msg.textContent="❌ Error submitting review!";
  }
});

// LOAD REVIEWS
db.collection("reviews").orderBy("time","desc")
.onSnapshot(snapshot=>{
  const container = document.getElementById("reviewsContainer");
  container.innerHTML="";
  if(snapshot.empty){
    container.innerHTML="<p>No reviews yet. Be the first to add!</p>";
  }
  snapshot.forEach(doc=>{
    const data = doc.data();
    const div = document.createElement("div");
    div.className="review-card";
    div.innerHTML = `
      <strong>${data.name}</strong>
      <div class="stars">${'★'.repeat(data.rating)}${'☆'.repeat(5-data.rating)}</div>
      <p>${data.review}</p>
    `;
    container.appendChild(div);
  });
});
</script>

</body>
</html>
